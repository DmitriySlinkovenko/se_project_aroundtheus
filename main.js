!function(){"use strict";var e=class{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}},t=class{constructor(e,t,s){this._name=e.name,this._link=e.link,this._templateSelector=t,this._handleImageClick=s}_setEventListeners(){this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__remove-button"),this._likeButton.addEventListener("click",(()=>this._handleLikeButton())),this._deleteButton.addEventListener("click",(()=>this._handleDeleteCard())),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}_handleDeleteCard(){this._element.remove()}_handleLikeButton(){this._likeButton.classList.toggle("card__like-button_active")}_getTemplate(){return document.querySelector(this._templateSelector).content.firstElementChild.cloneNode(!0)}generateCard(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".card__image"),this._cardTitle=this._element.querySelector(".card__title"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name,this._cardImage.alt=this._name,this._setEventListeners(),this._element}};const s=document.querySelector(".profile__edit-button"),n=document.querySelector(".profile__add-button"),i=(document.querySelector("#input__image_title"),document.querySelector("#input__image_link"),document.querySelector("#profile-submit__form")),r=document.querySelector("#image-submit__form"),o={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__save-button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"};class a{constructor(e){this._modalElement=document.querySelector(e)}open(){this._modalElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscapeClose)}close(){this._modalElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscapeClose)}_handleEscapeClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._modalElement.querySelector(".modal__close-button").addEventListener("click",(()=>{this.close()})),this._modalElement.addEventListener("click",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}class l extends a{constructor(e,t){super(e),this._modalForm=this._modalElement.querySelector("form"),this._handleFormSubmit=t,this._inputList=this._modalElement.querySelectorAll(".form__input")}_getInputValues(){const e={};return this._inputList.forEach((t=>{let{name:s,value:n}=t;e[s]=n})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._modalElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}}const c=new class{constructor(e){let{profileName:t,profileDescription:s}=e;this._profileName=document.querySelector(t),this._profileDescription=document.querySelector(s)}getUserInfo(){return this._user={name:this._profileName.textContent,description:this._profileDescription.textContent},this._user}setUserInfo(e){let{name:t,description:s}=e;this._profileName.textContent=t,this._profileDescription.textContent=s}}({profileName:".profile__title",profileDescription:".profile__subtitle"}),_=new class extends a{constructor(e){super(e),this._imageElement=this._modalElement.querySelector(".modal__card-preview_image"),this._imageTitle=this._modalElement.querySelector(".modal__preview_heading")}open(e){this._imageElement.src=e.link,this._imageTitle.textContent=e.name,this._imageElement.alt=e.name,super.open()}}("#preview-image-modal");_.setEventListeners();const m=(e,t)=>{_.open({name:e,link:t})},u=new l("#edit__modal",(function(e){let{name:t,description:s}=e;c.setUserInfo({name:t,description:s})}));u.setEventListeners(),s.addEventListener("click",(()=>{u.open();const e=c.getUserInfo();u.setInputValues(e),E.resetValidation()}));const d=new l("#add-card__modal",(function(e){(function(e){const t=p(e);h.addItem(t)})(e),d.close(),r.reset(),f.resetValidation()}));d.setEventListeners(),n.addEventListener("click",(()=>{d.open()}));const h=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>this._renderer(e)))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=p(e);h.addItem(t)}},".elements");function p(e){return new t(e,"#card-template",m).generateCard()}h.renderItems();const E=new e(o,i),f=new e(o,r);E.enableValidation(),f.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUZFLEVBQXFCM0UsbUJBQ3JCa0YsRUFBc0JsRixrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL01vZGFsLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL01vZGFsV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL01vZGFsV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbHMuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgdGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19yZW1vdmUtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUJ1dHRvbigpKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVEZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7XHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLy9CdXR0b25zXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuXHJcbi8vIElucHV0c1xyXG5leHBvcnQgY29uc3QgaW1hZ2VUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXRfX2ltYWdlX3RpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgaW1hZ2VMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dF9faW1hZ2VfbGlua1wiKTtcclxuXHJcbi8vIEZvcm0gc3VibWl0c1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm1TdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtc3VibWl0X19mb3JtXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IGltYWdlU3VibWl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2Utc3VibWl0X19mb3JtXCIpO1xyXG5cclxuLy8gRm9ybSBWYWxpZGF0aW9uXHJcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19zYXZlLWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcImZvcm1fX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWwge1xyXG4gIGNvbnN0cnVjdG9yKG1vZGFsKSB7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1vZGFsKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjYXBlQ2xvc2UgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIik7XHJcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgTW9kYWwgZnJvbSBcIi4uL2NvbXBvbmVudHMvTW9kYWxcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsV2l0aEZvcm0gZXh0ZW5kcyBNb2RhbCB7XHJcbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIobW9kYWxTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9tb2RhbEZvcm0gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXREYXRhID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoeyBuYW1lLCB2YWx1ZSB9KSA9PiB7XHJcbiAgICAgIGlucHV0RGF0YVtuYW1lXSA9IHZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGlucHV0RGF0YTtcclxuICB9XHJcblxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX21vZGFsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvY2FyZC5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgKiBhcyBjb25zdGFudHMgZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgTW9kYWxXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvTW9kYWxXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IE1vZGFsV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvTW9kYWxXaXRoRm9ybS5qc1wiO1xyXG5cclxuLy8gVXNlciBJbmZvXHJcbmNvbnN0IHVzZXIgPSBuZXcgVXNlckluZm8oe1xyXG4gIHByb2ZpbGVOYW1lOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbjogXCIucHJvZmlsZV9fc3VidGl0bGVcIixcclxufSk7XHJcblxyXG4vL0ltYWdlIFByZXZpZXdcclxuY29uc3QgaW1hZ2VQcmV2aWV3ID0gbmV3IE1vZGFsV2l0aEltYWdlKFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIik7XHJcbmltYWdlUHJldmlldy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdCBoYW5kbGVJbWFnZUNsaWNrID0gKG5hbWUsIGxpbmspID0+IHtcclxuICBpbWFnZVByZXZpZXcub3Blbih7IG5hbWUsIGxpbmsgfSk7XHJcbn07XHJcblxyXG4vLyBFZGl0IHByb2ZpbGUgbW9kYWxcclxuY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IG5ldyBNb2RhbFdpdGhGb3JtKFxyXG4gIFwiI2VkaXRfX21vZGFsXCIsXHJcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcclxuKTtcclxucHJvZmlsZUVkaXRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdGFudHMucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwcm9maWxlRWRpdE1vZGFsLm9wZW4oKTtcclxuICBjb25zdCB1c2VySW5mbyA9IHVzZXIuZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlRWRpdE1vZGFsLnNldElucHV0VmFsdWVzKHVzZXJJbmZvKTtcclxuICBwcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICB1c2VyLnNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSk7XHJcbn1cclxuXHJcbi8vIEFkZCBuZXcgY2FyZCBtb2RhbFxyXG5jb25zdCBhZGROZXdDYXJkTW9kYWwgPSBuZXcgTW9kYWxXaXRoRm9ybShcclxuICBcIiNhZGQtY2FyZF9fbW9kYWxcIixcclxuICBoYW5kbGVJbWFnZVN1Ym1pdFxyXG4pO1xyXG5cclxuYWRkTmV3Q2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNvbnN0YW50cy5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkTmV3Q2FyZE1vZGFsLm9wZW4oKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZVN1Ym1pdChjYXJkKSB7XHJcbiAgcmVuZGVyQ2FyZChjYXJkKTtcclxuICBhZGROZXdDYXJkTW9kYWwuY2xvc2UoKTtcclxuICBjb25zdGFudHMuaW1hZ2VTdWJtaXRGb3JtLnJlc2V0KCk7XHJcbiAgYWRkSW1hZ2VGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59XHJcblxyXG4vL1NlY3Rpb25cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogY29uc3RhbnRzLmluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcclxuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIuZWxlbWVudHNcIlxyXG4pO1xyXG5cclxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbi8vIEZ1bmN0aW9uc1xyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcclxuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoZGF0YSk7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkKTtcclxufVxyXG5cclxuLy8gRm9ybSBWYWxpZGF0aW9uXHJcblxyXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGNvbnN0YW50cy5zZXR0aW5ncyxcclxuICBjb25zdGFudHMucHJvZmlsZUZvcm1TdWJtaXRcclxuKTtcclxuY29uc3QgYWRkSW1hZ2VGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgY29uc3RhbnRzLnNldHRpbmdzLFxyXG4gIGNvbnN0YW50cy5pbWFnZVN1Ym1pdEZvcm1cclxuKTtcclxucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRJbWFnZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBwcm9maWxlTmFtZSwgcHJvZmlsZURlc2NyaXB0aW9uIH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZSk7XHJcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVEZXNjcmlwdGlvbik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHRoaXMuX3VzZXIgPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICAgIHJldHVybiB0aGlzLl91c2VyO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhJbWFnZSBleHRlbmRzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcihtb2RhbFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihtb2RhbFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fY2FyZC1wcmV2aWV3X2ltYWdlXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbWFnZVRpdGxlID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX19wcmV2aWV3X2hlYWRpbmdcIlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2ltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gZGF0YS5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjbGFzc1NlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2Zvcm0iLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRFbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiaW5wdXRFbCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInJlbW92ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJldmVyeSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiaW5wdXRFbGVtZW50IiwiZGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9saWtlQnV0dG9uIiwiX2VsZW1lbnQiLCJfZGVsZXRlQnV0dG9uIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkSW1hZ2UiLCJ0b2dnbGUiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsImdlbmVyYXRlQ2FyZCIsIl9jYXJkVGl0bGUiLCJzcmMiLCJhbHQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImFkZE5ld0NhcmRCdXR0b24iLCJwcm9maWxlRm9ybVN1Ym1pdCIsImltYWdlU3VibWl0Rm9ybSIsImZvcm1TZWxlY3RvciIsIk1vZGFsIiwibW9kYWwiLCJfbW9kYWxFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NhcGVDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJNb2RhbFdpdGhGb3JtIiwibW9kYWxTZWxlY3RvciIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9tb2RhbEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dExpc3QiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dERhdGEiLCJfcmVmIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsImlucHV0IiwidXNlciIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVEZXNjcmlwdGlvbiIsImdldFVzZXJJbmZvIiwiX3VzZXIiLCJkZXNjcmlwdGlvbiIsInNldFVzZXJJbmZvIiwiX3JlZjIiLCJpbWFnZVByZXZpZXciLCJfaW1hZ2VFbGVtZW50IiwiX2ltYWdlVGl0bGUiLCJwcm9maWxlRWRpdE1vZGFsIiwiY29uc3RhbnRzIiwidXNlckluZm8iLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsImFkZE5ld0NhcmRNb2RhbCIsImNhcmQiLCJjcmVhdGVDYXJkIiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwicmVuZGVyQ2FyZCIsImFkZEltYWdlRm9ybVZhbGlkYXRvciIsImNsYXNzU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZERhdGEiLCJjYXJkRWxlbWVudCIsIkNhcmQiLCJGb3JtVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==