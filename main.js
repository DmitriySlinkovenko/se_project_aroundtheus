!function(){"use strict";var e=class{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}},t=class{constructor(e,t,s,i,n){this._name=e.name,this._link=e.link,this._templateSelector=t,this._handleImageClick=s,this._handleDeleteButton=i,this._id=e._id,this._handleLike=n,this._isLiked=!1}_setEventListeners(){this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__remove-button"),this._likeButton.addEventListener("click",(()=>{this._likeButton.classList.contains("card__like-button_active")?(this._handleLike(this.getId()),this._likeButton.classList.remove("card__like-button_active")):(this._likeButton.classList.add("card__like-button_active"),this._handleLike(this.getId()))})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteButton(this.getId(),this._element)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}getId(){return this._id}_handleLikeButton(){this._likeButton.classList.toggle("card__like-button_active")}_getTemplate(){return document.querySelector(this._templateSelector).content.firstElementChild.cloneNode(!0)}generateCard(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".card__image"),this._cardTitle=this._element.querySelector(".card__title"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name,this._cardImage.alt=this._name,this._setEventListeners(),this._element}};const s=document.querySelector(".profile__edit-button"),i=document.querySelector(".profile__add-button"),n=document.querySelector("#avatar-edit"),r=(document.querySelector("#input__image_title"),document.querySelector("#input__image_link"),document.querySelector("#profile-submit__form")),a=document.querySelector("#image-submit__form"),o=document.querySelector("#avatar-edit-form"),l=document.querySelector("#verification-form"),c={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__save-button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"};class h{constructor(e){this._modalElement=document.querySelector(e)}open(){this._modalElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscapeClose)}close(){this._modalElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscapeClose)}_handleEscapeClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._modalElement.querySelector(".modal__close-button").addEventListener("click",(()=>{this.close()})),this._modalElement.addEventListener("click",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}class d extends h{constructor(e,t){super(e),this._modalForm=this._modalElement.querySelector(".form"),this._handleFormSubmit=t,this._inputList=this._modalElement.querySelectorAll(".form__input"),this._submitButton=this._modalForm.querySelector(".form__save-button")}_getInputValues(){const e={};return this._inputList.forEach((t=>{let{name:s,value:i}=t;e[s]=i})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:"Save"}setEventListeners(){super.setEventListeners(),this._modalElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}}const u=new class{constructor(e){let{profileName:t,profileDescription:s,profileAvatar:i}=e;this._profileName=document.querySelector(t),this._profileDescription=document.querySelector(s),this._avatar=document.querySelector(i)}getUserInfo(){return this._user={name:this._profileName.textContent,about:this._profileDescription.textContent},this._user}setUserInfo(e){let{name:t,about:s}=e;this._profileName.textContent=t,this._profileDescription.textContent=s}setAvatar(e){this._avatar.src=e}}({profileName:".profile__title",profileDescription:".profile__subtitle",profileAvatar:".profile__avatar"}),_=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._url=t,this._header=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._url}/cards`,{headers:this._header}).then((e=>this._checkResponse(e)))}getUserInfo(){return fetch(`${this._url}/users/me`,{headers:this._header}).then((e=>this._checkResponse(e))).catch((e=>{console.error(e)}))}updateUserProfile(e){let{name:t,about:s}=e;return fetch(`${this._url}/users/me`,{method:"PATCH",headers:this._header,body:JSON.stringify({name:`${t}`,about:`${s}`})}).then((e=>this._checkResponse(e))).catch((e=>{console.error(e)}))}updateAvatar(e){let{link:t}=e;return fetch(`${this._url}/users/me/avatar`,{method:"PATCH",headers:this._header,body:JSON.stringify({avatar:`${t}`})}).then((e=>this._checkResponse(e))).catch((e=>{console.error(e)}))}addCard(e){let{name:t,link:s}=e;return fetch(`${this._url}/cards`,{method:"POST",headers:this._header,body:JSON.stringify({name:t,link:s})}).then((e=>this._checkResponse(e))).catch((e=>{console.error(e)}))}deleteCard(e){return fetch(`${this._url}/cards/${e}`,{method:"DELETE",headers:this._header}).then((e=>this._checkResponse(e))).catch((e=>{console.error(e)}))}likeCard(e){return fetch(`${this._url}/cards/${e}/likes`,{method:"PUT",headers:this._header}).then((e=>this._checkResponse(e))).catch((e=>{console.error(e)}))}dislikeCard(e){return fetch(`${this._url}/cards/${e}/likes`,{method:"DELETE",headers:this._header}).then((e=>this._checkResponse(e))).catch((e=>{console.error(e)}))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"6e2733e6-8f97-40f4-b18f-c832cf63bc4b","Content-Type":"application/json"}}),m=new class extends h{constructor(e){super(e),this._imageElement=this._modalElement.querySelector(".modal__card-preview_image"),this._imageTitle=this._modalElement.querySelector(".modal__preview_heading")}open(e){this._imageElement.src=e.link,this._imageTitle.textContent=e.name,this._imageElement.alt=e.name,super.open()}}("#preview-image-modal");m.setEventListeners();const p=(e,t)=>{m.open({name:e,link:t})},v=new d("#edit__modal",(function(e){let{name:t,about:s}=e;v.setLoading(!0),_.updateUserProfile({name:t,about:s}).then((()=>{u.setUserInfo({name:t,about:s})})).finally((()=>{v.setLoading(!1),v.close()}))}));v.setEventListeners(),s.addEventListener("click",(()=>{v.open();const e=u.getUserInfo();v.setInputValues(e),C.resetValidation()}));const f=new d("#avatar-change-modal",(function(e){let{link:t}=e;f.setLoading(!0),_.updateAvatar({link:t}).then((()=>{u.setAvatar(t)})).finally((()=>{f.setLoading(!1),f.close()}))}));f.setEventListeners(),n.addEventListener("click",(()=>{f.open()})),_.getUserInfo().then((e=>{u.setUserInfo(e),u.setAvatar(e.avatar)}));const g=new d("#add-card__modal",(function(e){g.setLoading(!0,"Saving..."),_.addCard(e).then((()=>{y(e)})).finally((()=>{g.setLoading(!1),a.reset(),I.resetValidation(),g.close()}))}));function E(e){_.getInitialCards().then((t=>t.forEach((t=>{t._id===e&&(!0===t.isLiked?_.dislikeCard(e):_.likeCard(e))}))))}g.setEventListeners(),i.addEventListener("click",(()=>{g.open()}));const k=new class extends h{constructor(e,t){super(e),this._modalForm=this._modalElement.querySelector(".form"),this._handleCardDelete=t,this._submitButton=this._modalForm.querySelector(".form__save-button")}setEventListeners(){super.setEventListeners(),this._modalElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleCardDelete(this),this.close()}))}setLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:"Save"}}("#verification-modal",L);function L(e,t){k.open(),l.addEventListener("submit",(()=>{k.setLoading(!0,"Deleting..."),_.deleteCard(e).then((()=>t.remove())).finally((()=>k.setLoading(!1)))}))}k.setEventListeners();const b=new class{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>this._renderer(e)))}addItem(e){this._container.append(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=S(e);b.addItem(t)}},".elements");function S(e){return new t(e,"#card-template",p,L,E).generateCard()}function y(e){const t=S(e);b.addItem(t),e.isLiked&&t.querySelector(".card__like-button").classList.add("card__like-button_active")}_.getInitialCards().then((e=>{e.forEach((e=>{y(e)}))}));const C=new e(c,r),I=new e(c,a),w=new e(c,o);C.enableValidation(),I.enableValidation(),w.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUdwQyxhQVVGLFNBQVNDLEVBQVdySixHQVFsQixPQVBhLElBQUlzSixFQUNmdEosRUFDQSxpQkFDQUUsRUFDQW9JLEVBQ0FOLEdBRVVwRyxjQUNkLENBRUEsU0FBU2tHLEVBQVc5SCxHQUNsQixNQUFNNkgsRUFBT3dCLEVBQVdySixHQUN4QndJLEVBQVlTLFFBQVFwQixHQUNoQjdILEVBQUtrSSxTQUNQTCxFQUNHdkosY0FBYyxzQkFDZFMsVUFBVUMsSUFBSSwyQkFFckIsQ0ExQkFtRyxFQUFJWSxrQkFBa0JFLE1BQU1zRCxJQUMxQkEsRUFBTTlKLFNBQVNvSSxJQUNiQyxFQUFXRCxFQUFLLEdBQ2hCLElBMkJKLE1BQU1ILEVBQXVCLElBQUk4QixFQUMvQmhDLEVBQ0FBLEdBRUlPLEVBQXdCLElBQUl5QixFQUNoQ2hDLEVBQ0FBLEdBRUlpQyxFQUFzQixJQUFJRCxFQUM5QmhDLEVBQ0FBLEdBRUZFLEVBQXFCL0gsbUJBQ3JCb0ksRUFBc0JwSSxtQkFDdEI4SixFQUFvQjlKLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9jYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvTW9kYWwuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvTW9kYWxXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL01vZGFsV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL01vZGFsV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgZGF0YSxcclxuICAgIHRlbXBsYXRlU2VsZWN0b3IsXHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgaGFuZGxlRGVsZXRlQnV0dG9uLFxyXG4gICAgaGFuZGxlTGlrZVxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uID0gaGFuZGxlRGVsZXRlQnV0dG9uO1xyXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX2hhbmRsZUxpa2UgPSBoYW5kbGVMaWtlO1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19yZW1vdmUtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIikpIHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlKHRoaXMuZ2V0SWQoKSk7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlKHRoaXMuZ2V0SWQoKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbih0aGlzLmdldElkKCksIHRoaXMuX2VsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0SWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faWQ7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vQnV0dG9uc1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCB1c2VyQXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItZWRpdFwiKTtcclxuXHJcbi8vIElucHV0c1xyXG5leHBvcnQgY29uc3QgaW1hZ2VUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXRfX2ltYWdlX3RpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgaW1hZ2VMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dF9faW1hZ2VfbGlua1wiKTtcclxuXHJcbi8vIEZvcm0gc3VibWl0c1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm1TdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtc3VibWl0X19mb3JtXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IGltYWdlU3VibWl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2Utc3VibWl0X19mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyU3VibWl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLWVkaXQtZm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IGRlbGV0ZUNvbmZpcm1Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN2ZXJpZmljYXRpb24tZm9ybVwiKTtcclxuXHJcbi8vIEZvcm0gVmFsaWRhdGlvblxyXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fc2F2ZS1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJmb3JtX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcihtb2RhbCkge1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihtb2RhbCk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX21vZGFsRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjYXBlQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY2FwZUNsb3NlID0gKGUpID0+IHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBidXR0b24gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xyXG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhGb3JtIGV4dGVuZHMgTW9kYWwge1xyXG4gIGNvbnN0cnVjdG9yKG1vZGFsU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKG1vZGFsU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fbW9kYWxGb3JtID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9tb2RhbEZvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19zYXZlLWJ1dHRvblwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0RGF0YSA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKHsgbmFtZSwgdmFsdWUgfSkgPT4ge1xyXG4gICAgICBpbnB1dERhdGFbbmFtZV0gPSB2YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0RGF0YTtcclxuICB9XHJcblxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldExvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX21vZGFsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvY2FyZC5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgKiBhcyBjb25zdGFudHMgZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgTW9kYWxXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvTW9kYWxXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IE1vZGFsV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvTW9kYWxXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgTW9kYWxXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5cclxuLy8gVXNlciBJbmZvXHJcbmNvbnN0IHVzZXIgPSBuZXcgVXNlckluZm8oe1xyXG4gIHByb2ZpbGVOYW1lOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbjogXCIucHJvZmlsZV9fc3VidGl0bGVcIixcclxuICBwcm9maWxlQXZhdGFyOiBcIi5wcm9maWxlX19hdmF0YXJcIixcclxufSk7XHJcblxyXG4vLyBBUElcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjZlMjczM2U2LThmOTctNDBmNC1iMThmLWM4MzJjZjYzYmM0YlwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG4vL0ltYWdlIFByZXZpZXdcclxuY29uc3QgaW1hZ2VQcmV2aWV3ID0gbmV3IE1vZGFsV2l0aEltYWdlKFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIik7XHJcbmltYWdlUHJldmlldy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdCBoYW5kbGVJbWFnZUNsaWNrID0gKG5hbWUsIGxpbmspID0+IHtcclxuICBpbWFnZVByZXZpZXcub3Blbih7IG5hbWUsIGxpbmsgfSk7XHJcbn07XHJcblxyXG4vLyBFZGl0IHByb2ZpbGUgbW9kYWxcclxuY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IG5ldyBNb2RhbFdpdGhGb3JtKFxyXG4gIFwiI2VkaXRfX21vZGFsXCIsXHJcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcclxuKTtcclxucHJvZmlsZUVkaXRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdGFudHMucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwcm9maWxlRWRpdE1vZGFsLm9wZW4oKTtcclxuICBjb25zdCB1c2VySW5mbyA9IHVzZXIuZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlRWRpdE1vZGFsLnNldElucHV0VmFsdWVzKHVzZXJJbmZvKTtcclxuICBwcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCh7IG5hbWUsIGFib3V0IH0pIHtcclxuICBwcm9maWxlRWRpdE1vZGFsLnNldExvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAudXBkYXRlVXNlclByb2ZpbGUoeyBuYW1lLCBhYm91dCB9KVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICB1c2VyLnNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwcm9maWxlRWRpdE1vZGFsLnNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICBwcm9maWxlRWRpdE1vZGFsLmNsb3NlKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy9Vc2VyIGF2YXRhclxyXG5jb25zdCBhdmF0YXJFZGl0TW9kYWwgPSBuZXcgTW9kYWxXaXRoRm9ybShcclxuICBcIiNhdmF0YXItY2hhbmdlLW1vZGFsXCIsXHJcbiAgaGFuZGxlQXZhdGFyU3VibWl0XHJcbik7XHJcbmF2YXRhckVkaXRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdGFudHMudXNlckF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGF2YXRhckVkaXRNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyU3VibWl0KHsgbGluayB9KSB7XHJcbiAgYXZhdGFyRWRpdE1vZGFsLnNldExvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAudXBkYXRlQXZhdGFyKHsgbGluayB9KVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICB1c2VyLnNldEF2YXRhcihsaW5rKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGF2YXRhckVkaXRNb2RhbC5zZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgYXZhdGFyRWRpdE1vZGFsLmNsb3NlKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuYXBpLmdldFVzZXJJbmZvKCkudGhlbigoZGF0YSkgPT4ge1xyXG4gIHVzZXIuc2V0VXNlckluZm8oZGF0YSk7XHJcbiAgdXNlci5zZXRBdmF0YXIoZGF0YS5hdmF0YXIpO1xyXG59KTtcclxuXHJcbi8vIEFkZCBuZXcgY2FyZCBtb2RhbFxyXG5jb25zdCBhZGROZXdDYXJkTW9kYWwgPSBuZXcgTW9kYWxXaXRoRm9ybShcclxuICBcIiNhZGQtY2FyZF9fbW9kYWxcIixcclxuICBoYW5kbGVJbWFnZVN1Ym1pdFxyXG4pO1xyXG5cclxuYWRkTmV3Q2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNvbnN0YW50cy5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkTmV3Q2FyZE1vZGFsLm9wZW4oKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZVN1Ym1pdChjYXJkKSB7XHJcbiAgYWRkTmV3Q2FyZE1vZGFsLnNldExvYWRpbmcodHJ1ZSwgXCJTYXZpbmcuLi5cIik7XHJcbiAgYXBpXHJcbiAgICAuYWRkQ2FyZChjYXJkKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICByZW5kZXJDYXJkKGNhcmQpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgYWRkTmV3Q2FyZE1vZGFsLnNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICBjb25zdGFudHMuaW1hZ2VTdWJtaXRGb3JtLnJlc2V0KCk7XHJcbiAgICAgIGFkZEltYWdlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICAgICAgYWRkTmV3Q2FyZE1vZGFsLmNsb3NlKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy9DYXJkIGxpa2UgJiYgZGlzbGlrZVxyXG5cclxuZnVuY3Rpb24gbGlrZUJ1dHRvbihpZCkge1xyXG4gIGFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChkYXRhKSA9PlxyXG4gICAgZGF0YS5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGlmIChkLl9pZCA9PT0gaWQpIHtcclxuICAgICAgICBpZiAoZC5pc0xpa2VkID09PSB0cnVlKSB7XHJcbiAgICAgICAgICBhcGkuZGlzbGlrZUNhcmQoaWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhcGkubGlrZUNhcmQoaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSlcclxuICApO1xyXG59XHJcblxyXG4vL0RlbGV0ZSBjYXJkIGNvbmZpcm1hdGlvbiBtb2RhbFxyXG5cclxuY29uc3QgY29uZmlybWF0aW9uTW9kYWwgPSBuZXcgTW9kYWxXaXRoQ29uZmlybWF0aW9uKFxyXG4gIFwiI3ZlcmlmaWNhdGlvbi1tb2RhbFwiLFxyXG4gIGhhbmRsZURlbGV0ZUNhcmRGb3JtXHJcbik7XHJcbmNvbmZpcm1hdGlvbk1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDYXJkRm9ybShpZCwgZWxlbWVudCkge1xyXG4gIGNvbmZpcm1hdGlvbk1vZGFsLm9wZW4oKTtcclxuICBjb25zdGFudHMuZGVsZXRlQ29uZmlybUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XHJcbiAgICBjb25maXJtYXRpb25Nb2RhbC5zZXRMb2FkaW5nKHRydWUsIFwiRGVsZXRpbmcuLi5cIik7XHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmQoaWQpXHJcbiAgICAgIC50aGVuKCgpID0+IGVsZW1lbnQucmVtb3ZlKCkpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IGNvbmZpcm1hdGlvbk1vZGFsLnNldExvYWRpbmcoZmFsc2UpKTtcclxuICB9KTtcclxufVxyXG5cclxuLy9TZWN0aW9uXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGNvbnN0YW50cy5pbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiLmVsZW1lbnRzXCJcclxuKTtcclxuXHJcbmFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChjYXJkcykgPT4ge1xyXG4gIGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcclxuICAgIHJlbmRlckNhcmQoY2FyZCk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy8gRnVuY3Rpb25zXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIGRhdGEsXHJcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgaGFuZGxlRGVsZXRlQ2FyZEZvcm0sXHJcbiAgICBsaWtlQnV0dG9uXHJcbiAgKTtcclxuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoZGF0YSk7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkKTtcclxuICBpZiAoZGF0YS5pc0xpa2VkKSB7XHJcbiAgICBjYXJkXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gRm9ybSBWYWxpZGF0aW9uXHJcblxyXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGNvbnN0YW50cy5zZXR0aW5ncyxcclxuICBjb25zdGFudHMucHJvZmlsZUZvcm1TdWJtaXRcclxuKTtcclxuY29uc3QgYWRkSW1hZ2VGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgY29uc3RhbnRzLnNldHRpbmdzLFxyXG4gIGNvbnN0YW50cy5pbWFnZVN1Ym1pdEZvcm1cclxuKTtcclxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGNvbnN0YW50cy5zZXR0aW5ncyxcclxuICBjb25zdGFudHMuYXZhdGFyU3VibWl0Rm9ybVxyXG4pO1xyXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFkZEltYWdlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBwcm9maWxlTmFtZSwgcHJvZmlsZURlc2NyaXB0aW9uLCBwcm9maWxlQXZhdGFyIH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZSk7XHJcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVEZXNjcmlwdGlvbik7XHJcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVBdmF0YXIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICB0aGlzLl91c2VyID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgICByZXR1cm4gdGhpcy5fdXNlcjtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgfVxyXG5cclxuICBzZXRBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl91cmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVyID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXIgfSkudGhlbigocmVzKSA9PlxyXG4gICAgICB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcylcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXIgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVVc2VyUHJvZmlsZSh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogYCR7bmFtZX1gLFxyXG4gICAgICAgIGFib3V0OiBgJHthYm91dH1gLFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlQXZhdGFyKHsgbGluayB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGAke2xpbmt9YCxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGxpbms6IGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXIsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXIsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGRpc2xpa2VDYXJkKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXIsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhJbWFnZSBleHRlbmRzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcihtb2RhbFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihtb2RhbFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fY2FyZC1wcmV2aWV3X2ltYWdlXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbWFnZVRpdGxlID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX19wcmV2aWV3X2hlYWRpbmdcIlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2ltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gZGF0YS5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgTW9kYWwgZnJvbSBcIi4uL2NvbXBvbmVudHMvTW9kYWxcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcihtb2RhbFNlbGVjdG9yLCBoYW5kbGVDYXJkRGVsZXRlKSB7XHJcbiAgICBzdXBlcihtb2RhbFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX21vZGFsRm9ybSA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlID0gaGFuZGxlQ2FyZERlbGV0ZTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX21vZGFsRm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX3NhdmUtYnV0dG9uXCIpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlKHRoaXMpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldExvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2xhc3NTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNsYXNzU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2Zvcm0iLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRFbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiaW5wdXRFbCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInJlbW92ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJldmVyeSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiaW5wdXRFbGVtZW50IiwiZGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQnV0dG9uIiwiaGFuZGxlTGlrZSIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwiX2lkIiwiX2hhbmRsZUxpa2UiLCJfaXNMaWtlZCIsIl9saWtlQnV0dG9uIiwiX2VsZW1lbnQiLCJfZGVsZXRlQnV0dG9uIiwiY29udGFpbnMiLCJnZXRJZCIsIl9jYXJkSW1hZ2UiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsInRvZ2dsZSIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2xvbmVOb2RlIiwiZ2VuZXJhdGVDYXJkIiwiX2NhcmRUaXRsZSIsInNyYyIsImFsdCIsInByb2ZpbGVFZGl0QnV0dG9uIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsInVzZXJBdmF0YXJCdXR0b24iLCJwcm9maWxlRm9ybVN1Ym1pdCIsImltYWdlU3VibWl0Rm9ybSIsImF2YXRhclN1Ym1pdEZvcm0iLCJkZWxldGVDb25maXJtRm9ybSIsImZvcm1TZWxlY3RvciIsIk1vZGFsIiwibW9kYWwiLCJfbW9kYWxFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NhcGVDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiTW9kYWxXaXRoRm9ybSIsIm1vZGFsU2VsZWN0b3IiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfbW9kYWxGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRMaXN0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXREYXRhIiwiX3JlZiIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJpbnB1dCIsInNldExvYWRpbmciLCJpc0xvYWRpbmciLCJsb2FkaW5nVGV4dCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInVzZXIiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVBdmF0YXIiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZURlc2NyaXB0aW9uIiwiX2F2YXRhciIsImdldFVzZXJJbmZvIiwiX3VzZXIiLCJhYm91dCIsInNldFVzZXJJbmZvIiwiX3JlZjIiLCJzZXRBdmF0YXIiLCJhdmF0YXIiLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl91cmwiLCJfaGVhZGVyIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJ0aGVuIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJ1cGRhdGVVc2VyUHJvZmlsZSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidXBkYXRlQXZhdGFyIiwiX3JlZjMiLCJhZGRDYXJkIiwiX3JlZjQiLCJkZWxldGVDYXJkIiwibGlrZUNhcmQiLCJkaXNsaWtlQ2FyZCIsImF1dGhvcml6YXRpb24iLCJpbWFnZVByZXZpZXciLCJfaW1hZ2VFbGVtZW50IiwiX2ltYWdlVGl0bGUiLCJwcm9maWxlRWRpdE1vZGFsIiwiZmluYWxseSIsImNvbnN0YW50cyIsInVzZXJJbmZvIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJhdmF0YXJFZGl0TW9kYWwiLCJhZGROZXdDYXJkTW9kYWwiLCJjYXJkIiwicmVuZGVyQ2FyZCIsImFkZEltYWdlRm9ybVZhbGlkYXRvciIsImxpa2VCdXR0b24iLCJkIiwiaXNMaWtlZCIsImNvbmZpcm1hdGlvbk1vZGFsIiwiaGFuZGxlQ2FyZERlbGV0ZSIsIl9oYW5kbGVDYXJkRGVsZXRlIiwiaGFuZGxlRGVsZXRlQ2FyZEZvcm0iLCJlbGVtZW50IiwiY2FyZFNlY3Rpb24iLCJjbGFzc1NlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiYXBwZW5kIiwiY2FyZERhdGEiLCJjYXJkRWxlbWVudCIsImNyZWF0ZUNhcmQiLCJDYXJkIiwiY2FyZHMiLCJGb3JtVmFsaWRhdG9yIiwiYXZhdGFyRm9ybVZhbGlkYXRvciJdLCJzb3VyY2VSb290IjoiIn0=