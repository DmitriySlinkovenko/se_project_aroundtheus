!function(){"use strict";var e=class{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}},t=class{constructor(e,t,s,i,r){this._name=e.name,this._link=e.link,this._templateSelector=t,this._handleImageClick=s,this._handleDeleteButton=i,this._id=e._id,this._handleLike=r,this._isLiked=e.isLiked}_setEventListeners(){this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__remove-button"),this._likeButton.addEventListener("click",(()=>{this._handleLike(this)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteButton(this.getId(),this._element)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}getId(){return this._id}setIsLiked(e){this._isLiked=e,this._renderLikes()}isLiked(){return this._isLiked}_renderLikes(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}_getTemplate(){return document.querySelector(this._templateSelector).content.firstElementChild.cloneNode(!0)}generateCard(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".card__image"),this._cardTitle=this._element.querySelector(".card__title"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name,this._cardImage.alt=this._name,this._setEventListeners(),this._renderLikes(),this._element}};const s=document.querySelector(".profile__edit-button"),i=document.querySelector(".profile__add-button"),r=document.querySelector("#avatar-edit"),n=(document.querySelector("#input__image_title"),document.querySelector("#input__image_link"),document.querySelector("#profile-submit__form")),o=document.querySelector("#image-submit__form"),a=document.querySelector("#avatar-edit-form"),l=document.querySelector("#verification-form"),c={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__save-button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"};class d{constructor(e){this._modalElement=document.querySelector(e)}open(){this._modalElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscapeClose)}close(){this._modalElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscapeClose)}_handleEscapeClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._modalElement.querySelector(".modal__close-button").addEventListener("click",(()=>{this.close()})),this._modalElement.addEventListener("click",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}class h{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>this._renderer(e)))}addItem(e){this._container.prepend(e)}}class _ extends d{constructor(e,t){super(e),this._modalForm=this._modalElement.querySelector(".form"),this._handleFormSubmit=t,this._inputList=this._modalElement.querySelectorAll(".form__input"),this._submitButton=this._modalForm.querySelector(".form__save-button")}_getInputValues(){const e={};return this._inputList.forEach((t=>{let{name:s,value:i}=t;e[s]=i})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:"Save"}setEventListeners(){super.setEventListeners(),this._modalElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}}const u=new class{constructor(e){let{profileName:t,profileDescription:s,profileAvatar:i}=e;this._profileName=document.querySelector(t),this._profileDescription=document.querySelector(s),this._avatar=document.querySelector(i)}getUserInfo(){return this._user={name:this._profileName.textContent,about:this._profileDescription.textContent},this._user}setUserInfo(e){let{name:t,about:s}=e;this._profileName.textContent=t,this._profileDescription.textContent=s}setAvatar(e){this._avatar.src=e}}({profileName:".profile__title",profileDescription:".profile__subtitle",profileAvatar:".profile__avatar"}),m=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._url=t,this._header=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._url}/cards`,{headers:this._header}).then((e=>this._checkResponse(e)))}getUserInfo(){return fetch(`${this._url}/users/me`,{headers:this._header}).then((e=>this._checkResponse(e)))}updateUserProfile(e){let{name:t,about:s}=e;return fetch(`${this._url}/users/me`,{method:"PATCH",headers:this._header,body:JSON.stringify({name:`${t}`,about:`${s}`})}).then((e=>this._checkResponse(e)))}updateAvatar(e){let{link:t}=e;return fetch(`${this._url}/users/me/avatar`,{method:"PATCH",headers:this._header,body:JSON.stringify({avatar:`${t}`})}).then((e=>this._checkResponse(e)))}addCard(e){let{name:t,link:s}=e;return fetch(`${this._url}/cards`,{method:"POST",headers:this._header,body:JSON.stringify({name:t,link:s})}).then((e=>{console.log(e),this._checkResponse(e)}))}deleteCard(e){return fetch(`${this._url}/cards/${e}`,{method:"DELETE",headers:this._header}).then((e=>this._checkResponse(e)))}likeCard(e){return fetch(`${this._url}/cards/${e}/likes`,{method:"PUT",headers:this._header}).then((e=>this._checkResponse(e)))}dislikeCard(e){return fetch(`${this._url}/cards/${e}/likes`,{method:"DELETE",headers:this._header}).then((e=>this._checkResponse(e)))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"6e2733e6-8f97-40f4-b18f-c832cf63bc4b","Content-Type":"application/json"}}),p=new class extends d{constructor(e){super(e),this._imageElement=this._modalElement.querySelector(".modal__card-preview_image"),this._imageTitle=this._modalElement.querySelector(".modal__preview_heading")}open(e){this._imageElement.src=e.link,this._imageTitle.textContent=e.name,this._imageElement.alt=e.name,super.open()}}("#preview-image-modal");p.setEventListeners();const v=(e,t)=>{p.open({name:e,link:t})},f=new _("#edit__modal",(function(e){let{name:t,about:s}=e;f.setLoading(!0),m.updateUserProfile({name:t,about:s}).then((()=>{u.setUserInfo({name:t,about:s}),f.close()})).catch((e=>{console.error(e)})).finally((()=>f.setLoading(!1)))}));f.setEventListeners(),s.addEventListener("click",(()=>{f.open();const e=u.getUserInfo();f.setInputValues(e),C.resetValidation()}));const E=new _("#avatar-change-modal",(function(e){let{link:t}=e;E.setLoading(!0),m.updateAvatar({link:t}).then((()=>{u.setAvatar(t),E.close()})).catch((e=>{console.error(e)})).finally((()=>E.setLoading(!1)))}));E.setEventListeners(),r.addEventListener("click",(()=>{E.open()})),m.getUserInfo().then((e=>{u.setUserInfo(e),u.setAvatar(e.avatar)})).catch((e=>{console.error(e)}));const L=new _("#add-card__modal",(function(e){L.setLoading(!0,"Saving..."),m.addCard(e).then((e=>{!function(e){const t=y(e);S.addItem(t)}(e),o.reset(),I.resetValidation(),L.close(),console.log(e)})).catch((e=>{console.error(e)})).finally((()=>L.setLoading(!1)))}));function k(e){e.isLiked()?m.dislikeCard(e._id).then((t=>e.setIsLiked(t.isLiked))).catch((e=>console.error(e))):m.likeCard(e._id).then((t=>e.setIsLiked(t.isLiked))).catch((e=>console.error(e)))}L.setEventListeners(),i.addEventListener("click",(()=>{L.open()}));const g=new class extends d{constructor(e,t){super(e),this._modalForm=this._modalElement.querySelector(".form"),this._handleCardDelete=t,this._submitButton=this._modalForm.querySelector(".form__save-button")}setEventListeners(){super.setEventListeners(),this._submitButton.addEventListener("submit",(()=>{console.log("hello world")}))}setLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:"Save"}}("#verification-modal",b);function b(e,t){g.open(),l.addEventListener("submit",(s=>{s.preventDefault(),g.setLoading(!0,"Deleting..."),m.deleteCard(e).then((()=>{t.remove(),g.close()})).catch((e=>{console.error(e)})).finally((()=>g.setLoading(!1,"Yes")))}))}let S;function y(e){return new t(e,"#card-template",v,b,k).generateCard()}g.setEventListeners(),m.getInitialCards().then((e=>{S=new h({items:e,renderer:e=>{const t=y(e);S.addItem(t)}},".elements"),S.renderItems()})).catch((e=>{console.error("Error fetching initial cards",e)}));const C=new e(c,n),I=new e(c,o),q=new e(c,a);C.enableValidation(),I.enableValidation(),q.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBd0VBLE1BeEVBLE1BQ0VBLFdBQUFBLENBQVlDLEVBQVVDLEdBQ3BCQyxLQUFLQyxNQUFRRixFQUNiQyxLQUFLRSxlQUFpQkosRUFBU0ssY0FDL0JILEtBQUtJLHNCQUF3Qk4sRUFBU08scUJBQ3RDTCxLQUFLTSxxQkFBdUJSLEVBQVNTLG9CQUNyQ1AsS0FBS1EsaUJBQW1CVixFQUFTVyxnQkFDakNULEtBQUtVLFlBQWNaLEVBQVNhLFdBQzVCWCxLQUFLWSxVQUFZLElBQUlaLEtBQUtDLE1BQU1ZLGlCQUFpQmIsS0FBS0UsaUJBQ3RERixLQUFLYyxjQUFnQmQsS0FBS0MsTUFBTWMsY0FBY2YsS0FBS0ksc0JBQ3JELENBRUFZLG1CQUFBQSxDQUFvQkMsR0FDYkEsRUFBUUMsU0FBU0MsTUFHcEJuQixLQUFLb0IsZ0JBQWdCSCxHQUZyQmpCLEtBQUtxQixnQkFBZ0JKLEVBSXpCLENBRUFJLGVBQUFBLENBQWdCSixHQUNkLE1BQU1LLEVBQWlCdEIsS0FBS0MsTUFBTWMsY0FBZSxJQUFHRSxFQUFRTSxZQUM1RE4sRUFBUU8sVUFBVUMsSUFBSXpCLEtBQUtRLGtCQUMzQmMsRUFBZUksWUFBY1QsRUFBUVUsa0JBQ3JDTCxFQUFlRSxVQUFVQyxJQUFJekIsS0FBS1UsWUFDcEMsQ0FFQVUsZUFBQUEsQ0FBZ0JILEdBQ2QsTUFBTUssRUFBaUJ0QixLQUFLQyxNQUFNYyxjQUFlLElBQUdFLEVBQVFNLFlBQzVETixFQUFRTyxVQUFVSSxPQUFPNUIsS0FBS1Esa0JBQzlCYyxFQUFlSSxZQUFjLEdBQzdCSixFQUFlRSxVQUFVSSxPQUFPNUIsS0FBS1UsWUFDdkMsQ0FFQW1CLGdCQUFBQSxHQUNFLE9BQVE3QixLQUFLWSxVQUFVa0IsT0FBT2IsR0FBWUEsRUFBUUMsU0FBU0MsT0FDN0QsQ0FFQVksa0JBQUFBLEdBQ00vQixLQUFLNkIsb0JBQ1A3QixLQUFLYyxjQUFjVSxVQUFVQyxJQUFJekIsS0FBS00sc0JBQ3RDTixLQUFLYyxjQUFja0IsVUFBVyxJQUU5QmhDLEtBQUtjLGNBQWNVLFVBQVVJLE9BQU81QixLQUFLTSxzQkFDekNOLEtBQUtjLGNBQWNrQixVQUFXLEVBRWxDLENBRUFDLGtCQUFBQSxHQUNFakMsS0FBS1ksVUFBVXNCLFNBQVNqQixJQUN0QkEsRUFBUWtCLGlCQUFpQixTQUFTLEtBQ2hDbkMsS0FBS2dCLG9CQUFvQkMsR0FDekJqQixLQUFLK0Isb0JBQW9CLEdBQ3pCLEdBRU4sQ0FFQUssZ0JBQUFBLEdBQ0VwQyxLQUFLQyxNQUFNa0MsaUJBQWlCLFVBQVdFLElBQ3JDQSxFQUFFQyxnQkFBZ0IsSUFFcEJ0QyxLQUFLaUMsb0JBQ1AsQ0FFQU0sZUFBQUEsR0FDRXZDLEtBQUsrQixxQkFDTC9CLEtBQUtZLFVBQVVzQixTQUFTTSxJQUN0QnhDLEtBQUtvQixnQkFBZ0JvQixFQUFhLEdBRXRDLEdDS0YsRUExRUEsTUFDRTNDLFdBQUFBLENBQ0U0QyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxHQUVBN0MsS0FBSzhDLE1BQVFMLEVBQUtNLEtBQ2xCL0MsS0FBS2dELE1BQVFQLEVBQUtRLEtBQ2xCakQsS0FBS2tELGtCQUFvQlIsRUFDekIxQyxLQUFLbUQsa0JBQW9CUixFQUN6QjNDLEtBQUtvRCxvQkFBc0JSLEVBQzNCNUMsS0FBS3FELElBQU1aLEVBQUtZLElBQ2hCckQsS0FBS3NELFlBQWNULEVBQ25CN0MsS0FBS3VELFNBQVdkLEVBQUtlLE9BQ3ZCLENBRUF2QixrQkFBQUEsR0FDRWpDLEtBQUt5RCxZQUFjekQsS0FBSzBELFNBQVMzQyxjQUFjLHNCQUMvQ2YsS0FBSzJELGNBQWdCM0QsS0FBSzBELFNBQVMzQyxjQUFjLHdCQUNqRGYsS0FBS3lELFlBQVl0QixpQkFBaUIsU0FBUyxLQUN6Q25DLEtBQUtzRCxZQUFZdEQsS0FBSyxJQUV4QkEsS0FBSzJELGNBQWN4QixpQkFBaUIsU0FBUyxLQUMzQ25DLEtBQUtvRCxvQkFBb0JwRCxLQUFLNEQsUUFBUzVELEtBQUswRCxTQUFTLElBRXZEMUQsS0FBSzZELFdBQVcxQixpQkFBaUIsU0FBUyxLQUN4Q25DLEtBQUttRCxrQkFBa0JuRCxLQUFLOEMsTUFBTzlDLEtBQUtnRCxNQUFNLEdBRWxELENBRUFZLEtBQUFBLEdBQ0UsT0FBTzVELEtBQUtxRCxHQUNkLENBRUFTLFVBQUFBLENBQVdOLEdBQ1R4RCxLQUFLdUQsU0FBV0MsRUFDaEJ4RCxLQUFLK0QsY0FDUCxDQUVBUCxPQUFBQSxHQUNFLE9BQU94RCxLQUFLdUQsUUFDZCxDQUVBUSxZQUFBQSxHQUNNL0QsS0FBS3VELFNBQ1B2RCxLQUFLeUQsWUFBWWpDLFVBQVVDLElBQUksNEJBRS9CekIsS0FBS3lELFlBQVlqQyxVQUFVSSxPQUFPLDJCQUV0QyxDQUVBb0MsWUFBQUEsR0FLRSxPQUpvQkMsU0FDakJsRCxjQUFjZixLQUFLa0QsbUJBQ25CZ0IsUUFBUUMsa0JBQWtCQyxXQUFVLEVBR3pDLENBRUFDLFlBQUFBLEdBU0UsT0FSQXJFLEtBQUswRCxTQUFXMUQsS0FBS2dFLGVBQ3JCaEUsS0FBSzZELFdBQWE3RCxLQUFLMEQsU0FBUzNDLGNBQWMsZ0JBQzlDZixLQUFLc0UsV0FBYXRFLEtBQUswRCxTQUFTM0MsY0FBYyxnQkFDOUNmLEtBQUs2RCxXQUFXVSxJQUFNdkUsS0FBS2dELE1BQzNCaEQsS0FBS3NFLFdBQVc1QyxZQUFjMUIsS0FBSzhDLE1BQ25DOUMsS0FBSzZELFdBQVdXLElBQU14RSxLQUFLOEMsTUFDM0I5QyxLQUFLaUMscUJBQ0xqQyxLQUFLK0QsZUFDRS9ELEtBQUswRCxRQUNkLEdDdkVLLE1BNEJNZSxFQUFvQlIsU0FBU2xELGNBQ3hDLHlCQUVXMkQsRUFBbUJULFNBQVNsRCxjQUFjLHdCQUMxQzRELEVBQW1CVixTQUFTbEQsY0FBYyxnQkFPMUM2RCxHQUphWCxTQUFTbEQsY0FBYyx1QkFDeEJrRCxTQUFTbEQsY0FBYyxzQkFHZmtELFNBQVNsRCxjQUN4QywwQkFFVzhELEVBQWtCWixTQUFTbEQsY0FBYyx1QkFDekMrRCxFQUFtQmIsU0FBU2xELGNBQWMscUJBQzFDZ0UsRUFBb0JkLFNBQVNsRCxjQUFjLHNCQUczQ2pCLEVBQVcsQ0FDdEJrRixhQUFjLFFBQ2Q3RSxjQUFlLGVBQ2ZFLHFCQUFzQixxQkFDdEJFLG9CQUFxQix3QkFDckJFLGdCQUFpQix5QkFDakJFLFdBQVksdUJDckRDLE1BQU1zRSxFQUNuQnBGLFdBQUFBLENBQVlxRixHQUNWbEYsS0FBS21GLGNBQWdCbEIsU0FBU2xELGNBQWNtRSxFQUM5QyxDQUVBRSxJQUFBQSxHQUNFcEYsS0FBS21GLGNBQWMzRCxVQUFVQyxJQUFJLGdCQUNqQ3dDLFNBQVM5QixpQkFBaUIsVUFBV25DLEtBQUtxRixtQkFDNUMsQ0FFQUMsS0FBQUEsR0FDRXRGLEtBQUttRixjQUFjM0QsVUFBVUksT0FBTyxnQkFDcENxQyxTQUFTc0Isb0JBQW9CLFVBQVd2RixLQUFLcUYsbUJBQy9DLENBRUFBLG1CQUFzQmhELElBQ04sV0FBVkEsRUFBRW1ELEtBQ0p4RixLQUFLc0YsT0FDUCxFQUdGRyxpQkFBQUEsR0FDaUJ6RixLQUFLbUYsY0FBY3BFLGNBQWMsd0JBQ3pDb0IsaUJBQWlCLFNBQVMsS0FDL0JuQyxLQUFLc0YsT0FBTyxJQUVkdEYsS0FBS21GLGNBQWNoRCxpQkFBaUIsU0FBVUUsSUFDeENBLEVBQUVxRCxPQUFPbEUsVUFBVW1FLFNBQVMsaUJBQzlCM0YsS0FBS3NGLE9BQ1AsR0FFSixFQy9CYSxNQUFNTSxFQUNuQi9GLFdBQUFBLENBQVdnRyxFQUFzQkMsR0FBZSxJQUFwQyxNQUFFQyxFQUFLLFNBQUVDLEdBQVVILEVBQzdCN0YsS0FBS2lHLE9BQVNGLEVBQ2QvRixLQUFLa0csVUFBWUYsRUFDakJoRyxLQUFLbUcsV0FBYWxDLFNBQVNsRCxjQUFjK0UsRUFDM0MsQ0FFQU0sV0FBQUEsR0FDRXBHLEtBQUtpRyxPQUFPL0QsU0FBU21FLEdBQVNyRyxLQUFLa0csVUFBVUcsSUFDL0MsQ0FFQUMsT0FBQUEsQ0FBUUMsR0FDTnZHLEtBQUttRyxXQUFXSyxRQUFRRCxFQUMxQixFQ1hhLE1BQU1FLFVBQXNCeEIsRUFDekNwRixXQUFBQSxDQUFZNkcsRUFBZUMsR0FDekJDLE1BQU1GLEdBQ04xRyxLQUFLNkcsV0FBYTdHLEtBQUttRixjQUFjcEUsY0FBYyxTQUNuRGYsS0FBSzhHLGtCQUFvQkgsRUFDekIzRyxLQUFLK0csV0FBYS9HLEtBQUttRixjQUFjdEUsaUJBQWlCLGdCQUN0RGIsS0FBS2MsY0FBZ0JkLEtBQUs2RyxXQUFXOUYsY0FBYyxxQkFDckQsQ0FFQWlHLGVBQUFBLEdBQ0UsTUFBTUMsRUFBWSxDQUFDLEVBSW5CLE9BSEFqSCxLQUFLK0csV0FBVzdFLFNBQVEyRCxJQUFxQixJQUFwQixLQUFFOUMsRUFBSSxNQUFFbUUsR0FBT3JCLEVBQ3RDb0IsRUFBVWxFLEdBQVFtRSxDQUFLLElBRWxCRCxDQUNULENBRUFFLGNBQUFBLENBQWUxRSxHQUNiekMsS0FBSytHLFdBQVc3RSxTQUFTa0YsSUFDdkJBLEVBQU1GLE1BQVF6RSxFQUFLMkUsRUFBTXJFLEtBQUssR0FFbEMsQ0FFQXNFLFVBQUFBLENBQVdDLEdBQXNDLElBQTNCQyxFQUFXQyxVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFHLFlBRWhDeEgsS0FBS2MsY0FBY1ksWUFEakI0RixFQUMrQkMsRUFFQSxNQUVyQyxDQUVBOUIsaUJBQUFBLEdBQ0VtQixNQUFNbkIsb0JBQ056RixLQUFLbUYsY0FBY2hELGlCQUFpQixVQUFXRSxJQUM3Q0EsRUFBRUMsaUJBQ0Z0QyxLQUFLOEcsa0JBQWtCOUcsS0FBS2dILGtCQUFrQixHQUVsRCxFQzNCRixNQUFNVyxFQUFPLElDWkUsTUFDYjlILFdBQUFBLENBQVdnRyxHQUFxRCxJQUFwRCxZQUFFK0IsRUFBVyxtQkFBRUMsRUFBa0IsY0FBRUMsR0FBZWpDLEVBQzVEN0YsS0FBSytILGFBQWU5RCxTQUFTbEQsY0FBYzZHLEdBQzNDNUgsS0FBS2dJLG9CQUFzQi9ELFNBQVNsRCxjQUFjOEcsR0FDbEQ3SCxLQUFLaUksUUFBVWhFLFNBQVNsRCxjQUFjK0csRUFDeEMsQ0FFQUksV0FBQUEsR0FLRSxPQUpBbEksS0FBS21JLE1BQVEsQ0FDWHBGLEtBQU0vQyxLQUFLK0gsYUFBYXJHLFlBQ3hCMEcsTUFBT3BJLEtBQUtnSSxvQkFBb0J0RyxhQUUzQjFCLEtBQUttSSxLQUNkLENBRUFFLFdBQUFBLENBQVdDLEdBQWtCLElBQWpCLEtBQUV2RixFQUFJLE1BQUVxRixHQUFPRSxFQUN6QnRJLEtBQUsrSCxhQUFhckcsWUFBY3FCLEVBQ2hDL0MsS0FBS2dJLG9CQUFvQnRHLFlBQWMwRyxDQUN6QyxDQUVBRyxTQUFBQSxDQUFVQyxHQUNSeEksS0FBS2lJLFFBQVExRCxJQUFNaUUsQ0FDckIsR0RWd0IsQ0FDeEJaLFlBQWEsa0JBQ2JDLG1CQUFvQixxQkFDcEJDLGNBQWUscUJBS1hXLEVBQU0sSUVwQkcsTUFDYjVJLFdBQUFBLENBQVdnRyxHQUF1QixJQUF0QixRQUFFNkMsRUFBTyxRQUFFQyxHQUFTOUMsRUFDOUI3RixLQUFLNEksS0FBT0YsRUFDWjFJLEtBQUs2SSxRQUFVRixDQUNqQixDQUVBRyxjQUFBQSxDQUFlQyxHQUNiLE9BQUlBLEVBQUlDLEdBQ0NELEVBQUlFLE9BRU5DLFFBQVFDLE9BQVEsVUFBU0osRUFBSUssU0FDdEMsQ0FFQUMsZUFBQUEsR0FDRSxPQUFPQyxNQUFPLEdBQUV0SixLQUFLNEksYUFBYyxDQUFFRCxRQUFTM0ksS0FBSzZJLFVBQVdVLE1BQU1SLEdBQ2xFL0ksS0FBSzhJLGVBQWVDLElBRXhCLENBRUFiLFdBQUFBLEdBQ0UsT0FBT29CLE1BQU8sR0FBRXRKLEtBQUs0SSxnQkFBaUIsQ0FBRUQsUUFBUzNJLEtBQUs2SSxVQUFXVSxNQUM5RFIsR0FBUS9JLEtBQUs4SSxlQUFlQyxJQUVqQyxDQUVBUyxpQkFBQUEsQ0FBaUJsQixHQUFrQixJQUFqQixLQUFFdkYsRUFBSSxNQUFFcUYsR0FBT0UsRUFDL0IsT0FBT2dCLE1BQU8sR0FBRXRKLEtBQUs0SSxnQkFBaUIsQ0FDcENhLE9BQVEsUUFDUmQsUUFBUzNJLEtBQUs2SSxRQUNkYSxLQUFNQyxLQUFLQyxVQUFVLENBQ25CN0csS0FBTyxHQUFFQSxJQUNUcUYsTUFBUSxHQUFFQSxRQUVYbUIsTUFBTVIsR0FBUS9JLEtBQUs4SSxlQUFlQyxJQUN2QyxDQUVBYyxZQUFBQSxDQUFZQyxHQUFXLElBQVYsS0FBRTdHLEdBQU02RyxFQUNuQixPQUFPUixNQUFPLEdBQUV0SixLQUFLNEksdUJBQXdCLENBQzNDYSxPQUFRLFFBQ1JkLFFBQVMzSSxLQUFLNkksUUFDZGEsS0FBTUMsS0FBS0MsVUFBVSxDQUNuQnBCLE9BQVMsR0FBRXZGLFFBRVpzRyxNQUFNUixHQUFRL0ksS0FBSzhJLGVBQWVDLElBQ3ZDLENBRUFnQixPQUFBQSxDQUFPQyxHQUFpQixJQUFoQixLQUFFakgsRUFBSSxLQUFFRSxHQUFNK0csRUFDcEIsT0FBT1YsTUFBTyxHQUFFdEosS0FBSzRJLGFBQWMsQ0FDakNhLE9BQVEsT0FDUmQsUUFBUzNJLEtBQUs2SSxRQUNkYSxLQUFNQyxLQUFLQyxVQUFVLENBQ25CN0csS0FBTUEsRUFDTkUsS0FBTUEsTUFFUHNHLE1BQU1SLElBQ1BrQixRQUFRQyxJQUFJbkIsR0FDWi9JLEtBQUs4SSxlQUFlQyxFQUFJLEdBRTVCLENBRUFvQixVQUFBQSxDQUFXNUksR0FDVCxPQUFPK0gsTUFBTyxHQUFFdEosS0FBSzRJLGNBQWNySCxJQUFNLENBQ3ZDa0ksT0FBUSxTQUNSZCxRQUFTM0ksS0FBSzZJLFVBQ2JVLE1BQU1SLEdBQVEvSSxLQUFLOEksZUFBZUMsSUFDdkMsQ0FFQXFCLFFBQUFBLENBQVM3SSxHQUNQLE9BQU8rSCxNQUFPLEdBQUV0SixLQUFLNEksY0FBY3JILFVBQVksQ0FDN0NrSSxPQUFRLE1BQ1JkLFFBQVMzSSxLQUFLNkksVUFDYlUsTUFBTVIsR0FBUS9JLEtBQUs4SSxlQUFlQyxJQUN2QyxDQUVBc0IsV0FBQUEsQ0FBWTlJLEdBQ1YsT0FBTytILE1BQU8sR0FBRXRKLEtBQUs0SSxjQUFjckgsVUFBWSxDQUM3Q2tJLE9BQVEsU0FDUmQsUUFBUzNJLEtBQUs2SSxVQUNiVSxNQUFNUixHQUFRL0ksS0FBSzhJLGVBQWVDLElBQ3ZDLEdGM0RrQixDQUNsQkwsUUFBUyxrREFDVEMsUUFBUyxDQUNQMkIsY0FBZSx1Q0FDZixlQUFnQixzQkFLZEMsRUFBZSxJRzNCTixjQUE2QnRGLEVBQzFDcEYsV0FBQUEsQ0FBWTZHLEdBQ1ZFLE1BQU1GLEdBQ04xRyxLQUFLd0ssY0FBZ0J4SyxLQUFLbUYsY0FBY3BFLGNBQ3RDLDhCQUVGZixLQUFLeUssWUFBY3pLLEtBQUttRixjQUFjcEUsY0FDcEMsMEJBRUosQ0FFQXFFLElBQUFBLENBQUszQyxHQUNIekMsS0FBS3dLLGNBQWNqRyxJQUFNOUIsRUFBS1EsS0FDOUJqRCxLQUFLeUssWUFBWS9JLFlBQWNlLEVBQUtNLEtBQ3BDL0MsS0FBS3dLLGNBQWNoRyxJQUFNL0IsRUFBS00sS0FDOUI2RCxNQUFNeEIsTUFDUixHSFdzQyx3QkFDeENtRixFQUFhOUUsb0JBQ2IsTUFBTTlDLEVBQW1CQSxDQUFDSSxFQUFNRSxLQUM5QnNILEVBQWFuRixLQUFLLENBQUVyQyxPQUFNRSxRQUFPLEVBSTdCeUgsRUFBbUIsSUFBSWpFLEVBQzNCLGdCQVdGLFNBQWdDWixHQUFrQixJQUFqQixLQUFFOUMsRUFBSSxNQUFFcUYsR0FBT3ZDLEVBQzlDNkUsRUFBaUJyRCxZQUFXLEdBQzVCb0IsRUFDR2Usa0JBQWtCLENBQUV6RyxPQUFNcUYsVUFDMUJtQixNQUFLLEtBQ0o1QixFQUFLVSxZQUFZLENBQUV0RixPQUFNcUYsVUFDekJzQyxFQUFpQnBGLE9BQU8sSUFFekJxRixPQUFPQyxJQUNOWCxRQUFRWSxNQUFNRCxFQUFJLElBRW5CRSxTQUFRLElBQU1KLEVBQWlCckQsWUFBVyxJQUMvQyxJQXBCQXFELEVBQWlCakYsb0JBQ2pCc0YsRUFBQUEsaUJBQTZDLFNBQVMsS0FDcERMLEVBQWlCdEYsT0FDakIsTUFBTTRGLEVBQVdyRCxFQUFLTyxjQUN0QndDLEVBQWlCdkQsZUFBZTZELEdBQ2hDQyxFQUFxQjFJLGlCQUFpQixJQWtCeEMsTUFBTTJJLEVBQWtCLElBQUl6RSxFQUMxQix3QkFRRixTQUEyQjZCLEdBQVcsSUFBVixLQUFFckYsR0FBTXFGLEVBQ2xDNEMsRUFBZ0I3RCxZQUFXLEdBQzNCb0IsRUFDR29CLGFBQWEsQ0FBRTVHLFNBQ2ZzRyxNQUFLLEtBQ0o1QixFQUFLWSxVQUFVdEYsR0FDZmlJLEVBQWdCNUYsT0FBTyxJQUV4QnFGLE9BQU9DLElBQ05YLFFBQVFZLE1BQU1ELEVBQUksSUFFbkJFLFNBQVEsSUFBTUksRUFBZ0I3RCxZQUFXLElBQzlDLElBakJBNkQsRUFBZ0J6RixvQkFDaEJzRixFQUFBQSxpQkFBNEMsU0FBUyxLQUNuREcsRUFBZ0I5RixNQUFNLElBaUJ4QnFELEVBQ0dQLGNBQ0FxQixNQUFNOUcsSUFDTGtGLEVBQUtVLFlBQVk1RixHQUNqQmtGLEVBQUtZLFVBQVU5RixFQUFLK0YsT0FBTyxJQUU1Qm1DLE9BQU9DLElBQ05YLFFBQVFZLE1BQU1ELEVBQUksSUFJdEIsTUFBTU8sRUFBa0IsSUFBSTFFLEVBQzFCLG9CQVNGLFNBQTJCMkUsR0FDekJELEVBQWdCOUQsWUFBVyxFQUFNLGFBQ2pDb0IsRUFDR3NCLFFBQVFxQixHQUNSN0IsTUFBTVIsS0F3RlgsU0FBb0J0RyxHQUNsQixNQUFNMkksRUFBT0MsRUFBVzVJLEdBQ3hCNkksRUFBWWhGLFFBQVE4RSxFQUN0QixDQTFGTUcsQ0FBV3hDLEdBQ1hnQyxFQUFBQSxRQUNBUyxFQUFzQmpKLGtCQUN0QjRJLEVBQWdCN0YsUUFDaEIyRSxRQUFRQyxJQUFJbkIsRUFBSSxJQUVqQjRCLE9BQU9DLElBQ05YLFFBQVFZLE1BQU1ELEVBQUksSUFFbkJFLFNBQVEsSUFBTUssRUFBZ0I5RCxZQUFXLElBQzlDLElBSUEsU0FBU29FLEVBQVdMLEdBQ2RBLEVBQUs1SCxVQUNQaUYsRUFDRzRCLFlBQVllLEVBQUsvSCxLQUNqQmtHLE1BQU1tQyxHQUFhTixFQUFLdEgsV0FBVzRILEVBQVNsSSxXQUM1Q21ILE9BQU9DLEdBQVFYLFFBQVFZLE1BQU1ELEtBRWhDbkMsRUFDRzJCLFNBQVNnQixFQUFLL0gsS0FDZGtHLE1BQU1tQyxHQUFhTixFQUFLdEgsV0FBVzRILEVBQVNsSSxXQUM1Q21ILE9BQU9DLEdBQVFYLFFBQVFZLE1BQU1ELElBRXBDLENBcENBTyxFQUFnQjFGLG9CQUNoQnNGLEVBQUFBLGlCQUE0QyxTQUFTLEtBQ25ESSxFQUFnQi9GLE1BQU0sSUFzQ3hCLE1BQU11RyxFQUFvQixJSTVJWCxjQUFvQzFHLEVBQ2pEcEYsV0FBQUEsQ0FBWTZHLEVBQWVrRixHQUN6QmhGLE1BQU1GLEdBQ04xRyxLQUFLNkcsV0FBYTdHLEtBQUttRixjQUFjcEUsY0FBYyxTQUNuRGYsS0FBSzZMLGtCQUFvQkQsRUFDekI1TCxLQUFLYyxjQUFnQmQsS0FBSzZHLFdBQVc5RixjQUFjLHFCQUNyRCxDQUVBMEUsaUJBQUFBLEdBQ0VtQixNQUFNbkIsb0JBQ056RixLQUFLYyxjQUFjcUIsaUJBQWlCLFVBQVUsS0FDNUM4SCxRQUFRQyxJQUFJLGNBQWMsR0FFOUIsQ0FFQTdDLFVBQUFBLENBQVdDLEdBQXNDLElBQTNCQyxFQUFXQyxVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFHLFlBRWhDeEgsS0FBS2MsY0FBY1ksWUFEakI0RixFQUMrQkMsRUFFQSxNQUVyQyxHSndIQSxzQkFDQXVFLEdBSUYsU0FBU0EsRUFBcUJ2SyxFQUFJZ0YsR0FDaENvRixFQUFrQnZHLE9BQ2xCMkYsRUFBQUEsaUJBQTZDLFVBQVcxSSxJQUN0REEsRUFBRUMsaUJBQ0ZxSixFQUFrQnRFLFlBQVcsRUFBTSxlQUNuQ29CLEVBQ0cwQixXQUFXNUksR0FDWGdJLE1BQUssS0FDSmhELEVBQVEzRSxTQUNSK0osRUFBa0JyRyxPQUFPLElBRTFCcUYsT0FBT0MsSUFDTlgsUUFBUVksTUFBTUQsRUFBSSxJQUVuQkUsU0FBUSxJQUFNYSxFQUFrQnRFLFlBQVcsRUFBTyxRQUFPLEdBRWhFLENBRUEsSUFBSWlFLEVBc0JKLFNBQVNELEVBQVc1SSxHQVFsQixPQVBhLElBQUlzSixFQUNmdEosRUFDQSxpQkFDQUUsRUFDQW1KLEVBQ0FMLEdBRVVwSCxjQUNkLENBbkRBc0gsRUFBa0JsRyxvQkFzQmxCZ0QsRUFDR1ksa0JBQ0FFLE1BQU15QyxJQUNMVixFQUFjLElBQUkxRixFQUNoQixDQUNFRyxNQUFPaUcsRUFDUGhHLFNBQVdpRyxJQUNULE1BQU1iLEVBQU9DLEVBQVdZLEdBQ3hCWCxFQUFZaEYsUUFBUThFLEVBQUssR0FHN0IsYUFFRkUsRUFBWWxGLGFBQWEsSUFFMUJ1RSxPQUFPRSxJQUNOWixRQUFRWSxNQUFNLCtCQUFnQ0EsRUFBTSxJQXNCeEQsTUFBTUksRUFBdUIsSUFBSWlCLEVBQy9CbkIsRUFDQUEsR0FFSVMsRUFBd0IsSUFBSVUsRUFDaENuQixFQUNBQSxHQUVJb0IsRUFBc0IsSUFBSUQsRUFDOUJuQixFQUNBQSxHQUdGRSxFQUFxQjdJLG1CQUNyQm9KLEVBQXNCcEosbUJBQ3RCK0osRUFBb0IvSixrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL01vZGFsLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvTW9kYWxXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL01vZGFsV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL01vZGFsV2l0aENvbmZpcm1hdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGRhdGEsXHJcbiAgICB0ZW1wbGF0ZVNlbGVjdG9yLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUJ1dHRvbixcclxuICAgIGhhbmRsZUxpa2VcclxuICApIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbiA9IGhhbmRsZURlbGV0ZUJ1dHRvbjtcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlID0gaGFuZGxlTGlrZTtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBkYXRhLmlzTGlrZWQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3JlbW92ZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2UodGhpcyk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24odGhpcy5nZXRJZCgpLCB0aGlzLl9lbGVtZW50KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxuXHJcbiAgc2V0SXNMaWtlZChpc0xpa2VkKSB7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gaXNMaWtlZDtcclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcbiAgfVxyXG5cclxuICBpc0xpa2VkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzTGlrZWQ7XHJcbiAgfVxyXG5cclxuICBfcmVuZGVyTGlrZXMoKSB7XHJcbiAgICBpZiAodGhpcy5faXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7XHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLy9CdXR0b25zXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHVzZXJBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhci1lZGl0XCIpO1xyXG5cclxuLy8gSW5wdXRzXHJcbmV4cG9ydCBjb25zdCBpbWFnZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dF9faW1hZ2VfdGl0bGVcIik7XHJcbmV4cG9ydCBjb25zdCBpbWFnZUxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0X19pbWFnZV9saW5rXCIpO1xyXG5cclxuLy8gRm9ybSBzdWJtaXRzXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybVN1Ym1pdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1zdWJtaXRfX2Zvcm1cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgaW1hZ2VTdWJtaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1zdWJtaXRfX2Zvcm1cIik7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJTdWJtaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItZWRpdC1mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgZGVsZXRlQ29uZmlybUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ZlcmlmaWNhdGlvbi1mb3JtXCIpO1xyXG5cclxuLy8gRm9ybSBWYWxpZGF0aW9uXHJcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19zYXZlLWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcImZvcm1fX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWwge1xyXG4gIGNvbnN0cnVjdG9yKG1vZGFsKSB7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1vZGFsKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjYXBlQ2xvc2UgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIik7XHJcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjbGFzc1NlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBNb2RhbCBmcm9tIFwiLi4vY29tcG9uZW50cy9Nb2RhbFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWxXaXRoRm9ybSBleHRlbmRzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcihtb2RhbFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihtb2RhbFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX21vZGFsRm9ybSA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fbW9kYWxGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fc2F2ZS1idXR0b25cIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dERhdGEgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlIH0pID0+IHtcclxuICAgICAgaW5wdXREYXRhW25hbWVdID0gdmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dERhdGE7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9jYXJkLmpzXCI7XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCAqIGFzIGNvbnN0YW50cyBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBNb2RhbFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Nb2RhbFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgTW9kYWxXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Nb2RhbFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBNb2RhbFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvTW9kYWxXaXRoQ29uZmlybWF0aW9uLmpzXCI7XHJcblxyXG4vLyBVc2VyIEluZm9cclxuY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyh7XHJcbiAgcHJvZmlsZU5hbWU6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uOiBcIi5wcm9maWxlX19zdWJ0aXRsZVwiLFxyXG4gIHByb2ZpbGVBdmF0YXI6IFwiLnByb2ZpbGVfX2F2YXRhclwiLFxyXG59KTtcclxuXHJcbi8vIEFQSVxyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiNmUyNzMzZTYtOGY5Ny00MGY0LWIxOGYtYzgzMmNmNjNiYzRiXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbi8vSW1hZ2UgUHJldmlld1xyXG5jb25zdCBpbWFnZVByZXZpZXcgPSBuZXcgTW9kYWxXaXRoSW1hZ2UoXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiKTtcclxuaW1hZ2VQcmV2aWV3LnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNvbnN0IGhhbmRsZUltYWdlQ2xpY2sgPSAobmFtZSwgbGluaykgPT4ge1xyXG4gIGltYWdlUHJldmlldy5vcGVuKHsgbmFtZSwgbGluayB9KTtcclxufTtcclxuXHJcbi8vIEVkaXQgcHJvZmlsZSBtb2RhbFxyXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gbmV3IE1vZGFsV2l0aEZvcm0oXHJcbiAgXCIjZWRpdF9fbW9kYWxcIixcclxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdFxyXG4pO1xyXG5wcm9maWxlRWRpdE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNvbnN0YW50cy5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHByb2ZpbGVFZGl0TW9kYWwub3BlbigpO1xyXG4gIGNvbnN0IHVzZXJJbmZvID0gdXNlci5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVFZGl0TW9kYWwuc2V0SW5wdXRWYWx1ZXModXNlckluZm8pO1xyXG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gIHByb2ZpbGVFZGl0TW9kYWwuc2V0TG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC51cGRhdGVVc2VyUHJvZmlsZSh7IG5hbWUsIGFib3V0IH0pXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIHVzZXIuc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KTtcclxuICAgICAgcHJvZmlsZUVkaXRNb2RhbC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiBwcm9maWxlRWRpdE1vZGFsLnNldExvYWRpbmcoZmFsc2UpKTtcclxufVxyXG5cclxuLy9Vc2VyIGF2YXRhclxyXG5jb25zdCBhdmF0YXJFZGl0TW9kYWwgPSBuZXcgTW9kYWxXaXRoRm9ybShcclxuICBcIiNhdmF0YXItY2hhbmdlLW1vZGFsXCIsXHJcbiAgaGFuZGxlQXZhdGFyU3VibWl0XHJcbik7XHJcbmF2YXRhckVkaXRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdGFudHMudXNlckF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGF2YXRhckVkaXRNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyU3VibWl0KHsgbGluayB9KSB7XHJcbiAgYXZhdGFyRWRpdE1vZGFsLnNldExvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAudXBkYXRlQXZhdGFyKHsgbGluayB9KVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICB1c2VyLnNldEF2YXRhcihsaW5rKTtcclxuICAgICAgYXZhdGFyRWRpdE1vZGFsLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IGF2YXRhckVkaXRNb2RhbC5zZXRMb2FkaW5nKGZhbHNlKSk7XHJcbn1cclxuXHJcbmFwaVxyXG4gIC5nZXRVc2VySW5mbygpXHJcbiAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgIHVzZXIuc2V0VXNlckluZm8oZGF0YSk7XHJcbiAgICB1c2VyLnNldEF2YXRhcihkYXRhLmF2YXRhcik7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pO1xyXG5cclxuLy8gQWRkIG5ldyBjYXJkIG1vZGFsXHJcbmNvbnN0IGFkZE5ld0NhcmRNb2RhbCA9IG5ldyBNb2RhbFdpdGhGb3JtKFxyXG4gIFwiI2FkZC1jYXJkX19tb2RhbFwiLFxyXG4gIGhhbmRsZUltYWdlU3VibWl0XHJcbik7XHJcblxyXG5hZGROZXdDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY29uc3RhbnRzLmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGROZXdDYXJkTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlU3VibWl0KGNhcmQpIHtcclxuICBhZGROZXdDYXJkTW9kYWwuc2V0TG9hZGluZyh0cnVlLCBcIlNhdmluZy4uLlwiKTtcclxuICBhcGlcclxuICAgIC5hZGRDYXJkKGNhcmQpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJlbmRlckNhcmQocmVzKTtcclxuICAgICAgY29uc3RhbnRzLmltYWdlU3VibWl0Rm9ybS5yZXNldCgpO1xyXG4gICAgICBhZGRJbWFnZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgICAgIGFkZE5ld0NhcmRNb2RhbC5jbG9zZSgpO1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiBhZGROZXdDYXJkTW9kYWwuc2V0TG9hZGluZyhmYWxzZSkpO1xyXG59XHJcblxyXG4vL0NhcmQgbGlrZSAmJiBkaXNsaWtlXHJcblxyXG5mdW5jdGlvbiBsaWtlQnV0dG9uKGNhcmQpIHtcclxuICBpZiAoY2FyZC5pc0xpa2VkKCkpIHtcclxuICAgIGFwaVxyXG4gICAgICAuZGlzbGlrZUNhcmQoY2FyZC5faWQpXHJcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gY2FyZC5zZXRJc0xpa2VkKHJlc3BvbnNlLmlzTGlrZWQpKVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcclxuICB9IGVsc2Uge1xyXG4gICAgYXBpXHJcbiAgICAgIC5saWtlQ2FyZChjYXJkLl9pZClcclxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiBjYXJkLnNldElzTGlrZWQocmVzcG9uc2UuaXNMaWtlZCkpXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG4gIH1cclxufVxyXG5cclxuLy9EZWxldGUgY2FyZCBjb25maXJtYXRpb24gbW9kYWxcclxuXHJcbmNvbnN0IGNvbmZpcm1hdGlvbk1vZGFsID0gbmV3IE1vZGFsV2l0aENvbmZpcm1hdGlvbihcclxuICBcIiN2ZXJpZmljYXRpb24tbW9kYWxcIixcclxuICBoYW5kbGVEZWxldGVDYXJkRm9ybVxyXG4pO1xyXG5jb25maXJtYXRpb25Nb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FyZEZvcm0oaWQsIGVsZW1lbnQpIHtcclxuICBjb25maXJtYXRpb25Nb2RhbC5vcGVuKCk7XHJcbiAgY29uc3RhbnRzLmRlbGV0ZUNvbmZpcm1Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbmZpcm1hdGlvbk1vZGFsLnNldExvYWRpbmcodHJ1ZSwgXCJEZWxldGluZy4uLlwiKTtcclxuICAgIGFwaVxyXG4gICAgICAuZGVsZXRlQ2FyZChpZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgY29uZmlybWF0aW9uTW9kYWwuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IGNvbmZpcm1hdGlvbk1vZGFsLnNldExvYWRpbmcoZmFsc2UsIFwiWWVzXCIpKTtcclxuICB9KTtcclxufVxyXG5cclxubGV0IGNhcmRTZWN0aW9uO1xyXG5cclxuYXBpXHJcbiAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKGNhcmRzKSA9PiB7XHJcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICB7XHJcbiAgICAgICAgaXRlbXM6IGNhcmRzLFxyXG4gICAgICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcclxuICAgICAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcclxuICAgICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgXCIuZWxlbWVudHNcIlxyXG4gICAgKTtcclxuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgaW5pdGlhbCBjYXJkc1wiLCBlcnJvcik7XHJcbiAgfSk7XHJcblxyXG4vLyBGdW5jdGlvbnNcclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgZGF0YSxcclxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDYXJkRm9ybSxcclxuICAgIGxpa2VCdXR0b25cclxuICApO1xyXG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGRhdGEpIHtcclxuICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChkYXRhKTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xyXG59XHJcblxyXG4vLyBGb3JtIFZhbGlkYXRpb25cclxuXHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgY29uc3RhbnRzLnNldHRpbmdzLFxyXG4gIGNvbnN0YW50cy5wcm9maWxlRm9ybVN1Ym1pdFxyXG4pO1xyXG5jb25zdCBhZGRJbWFnZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBjb25zdGFudHMuc2V0dGluZ3MsXHJcbiAgY29uc3RhbnRzLmltYWdlU3VibWl0Rm9ybVxyXG4pO1xyXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgY29uc3RhbnRzLnNldHRpbmdzLFxyXG4gIGNvbnN0YW50cy5hdmF0YXJTdWJtaXRGb3JtXHJcbik7XHJcblxyXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFkZEltYWdlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBwcm9maWxlTmFtZSwgcHJvZmlsZURlc2NyaXB0aW9uLCBwcm9maWxlQXZhdGFyIH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZSk7XHJcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVEZXNjcmlwdGlvbik7XHJcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVBdmF0YXIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICB0aGlzLl91c2VyID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgICByZXR1cm4gdGhpcy5fdXNlcjtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgfVxyXG5cclxuICBzZXRBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl91cmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVyID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXIgfSkudGhlbigocmVzKSA9PlxyXG4gICAgICB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcylcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXIgfSkudGhlbihcclxuICAgICAgKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlVXNlclByb2ZpbGUoeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcixcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGAke25hbWV9YCxcclxuICAgICAgICBhYm91dDogYCR7YWJvdXR9YCxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVBdmF0YXIoeyBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcixcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogYCR7bGlua31gLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGxpbms6IGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtpZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgbGlrZUNhcmQoaWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcixcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcclxuICB9XHJcblxyXG4gIGRpc2xpa2VDYXJkKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXIsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBNb2RhbCBmcm9tIFwiLi9Nb2RhbC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWxXaXRoSW1hZ2UgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIobW9kYWxTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2NhcmQtcHJldmlld19pbWFnZVwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5faW1hZ2VUaXRsZSA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fcHJldmlld19oZWFkaW5nXCJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9pbWFnZVRpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFsdCA9IGRhdGEubmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBNb2RhbCB7XHJcbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3RvciwgaGFuZGxlQ2FyZERlbGV0ZSkge1xyXG4gICAgc3VwZXIobW9kYWxTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9tb2RhbEZvcm0gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSA9IGhhbmRsZUNhcmREZWxldGU7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9tb2RhbEZvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19zYXZlLWJ1dHRvblwiKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coXCJoZWxsbyB3b3JsZFwiKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0TG9hZGluZyhpc0xvYWRpbmcsIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIikge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9mb3JtIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2lucHV0RWxzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJxdWVyeVNlbGVjdG9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImlucHV0RWwiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJyZW1vdmUiLCJfaGFzSW52YWxpZElucHV0IiwiZXZlcnkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJkaXNhYmxlZCIsIl9zZXRFdmVudExpc3RlbmVycyIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsImlucHV0RWxlbWVudCIsImRhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUJ1dHRvbiIsImhhbmRsZUxpa2UiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsIl9pZCIsIl9oYW5kbGVMaWtlIiwiX2lzTGlrZWQiLCJpc0xpa2VkIiwiX2xpa2VCdXR0b24iLCJfZWxlbWVudCIsIl9kZWxldGVCdXR0b24iLCJnZXRJZCIsIl9jYXJkSW1hZ2UiLCJzZXRJc0xpa2VkIiwiX3JlbmRlckxpa2VzIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJnZW5lcmF0ZUNhcmQiLCJfY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJhZGROZXdDYXJkQnV0dG9uIiwidXNlckF2YXRhckJ1dHRvbiIsInByb2ZpbGVGb3JtU3VibWl0IiwiaW1hZ2VTdWJtaXRGb3JtIiwiYXZhdGFyU3VibWl0Rm9ybSIsImRlbGV0ZUNvbmZpcm1Gb3JtIiwiZm9ybVNlbGVjdG9yIiwiTW9kYWwiLCJtb2RhbCIsIl9tb2RhbEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY2FwZUNsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlNlY3Rpb24iLCJfcmVmIiwiY2xhc3NTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiTW9kYWxXaXRoRm9ybSIsIm1vZGFsU2VsZWN0b3IiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfbW9kYWxGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRMaXN0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXREYXRhIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsImlucHV0Iiwic2V0TG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwidXNlciIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZUF2YXRhciIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlRGVzY3JpcHRpb24iLCJfYXZhdGFyIiwiZ2V0VXNlckluZm8iLCJfdXNlciIsImFib3V0Iiwic2V0VXNlckluZm8iLCJfcmVmMiIsInNldEF2YXRhciIsImF2YXRhciIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX3VybCIsIl9oZWFkZXIiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJ1cGRhdGVVc2VyUHJvZmlsZSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidXBkYXRlQXZhdGFyIiwiX3JlZjMiLCJhZGRDYXJkIiwiX3JlZjQiLCJjb25zb2xlIiwibG9nIiwiZGVsZXRlQ2FyZCIsImxpa2VDYXJkIiwiZGlzbGlrZUNhcmQiLCJhdXRob3JpemF0aW9uIiwiaW1hZ2VQcmV2aWV3IiwiX2ltYWdlRWxlbWVudCIsIl9pbWFnZVRpdGxlIiwicHJvZmlsZUVkaXRNb2RhbCIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJmaW5hbGx5IiwiY29uc3RhbnRzIiwidXNlckluZm8iLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsImF2YXRhckVkaXRNb2RhbCIsImFkZE5ld0NhcmRNb2RhbCIsImNhcmQiLCJjcmVhdGVDYXJkIiwiY2FyZFNlY3Rpb24iLCJyZW5kZXJDYXJkIiwiYWRkSW1hZ2VGb3JtVmFsaWRhdG9yIiwibGlrZUJ1dHRvbiIsInJlc3BvbnNlIiwiY29uZmlybWF0aW9uTW9kYWwiLCJoYW5kbGVDYXJkRGVsZXRlIiwiX2hhbmRsZUNhcmREZWxldGUiLCJoYW5kbGVEZWxldGVDYXJkRm9ybSIsIkNhcmQiLCJjYXJkcyIsImNhcmREYXRhIiwiRm9ybVZhbGlkYXRvciIsImF2YXRhckZvcm1WYWxpZGF0b3IiXSwic291cmNlUm9vdCI6IiJ9